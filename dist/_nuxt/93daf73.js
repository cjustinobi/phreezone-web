(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1053:function(t,e,n){"use strict";n(944)},1054:function(t,e,n){(e=n(45)(!1)).push([t.i,".td[data-v-0afd34d2]{border-bottom:1px solid #dfe0e2}@media (max-width:767px){.download[data-v-0afd34d2]{margin-bottom:20px;margin-left:10px}}",""]),t.exports=e},1098:function(t,e,n){"use strict";n.r(e);n(63),n(142),n(82),n(64),n(164),n(95);var r=n(27),o=n(901),l=[{title:"Date",dataIndex:"created_at",scopedSlots:{customRender:"date"}},{title:"Sold By",dataIndex:"sold_by",scopedSlots:{customRender:"soldBy"}},{title:"Bought By",dataIndex:"bought_by",scopedSlots:{customRender:"boughtBy"}},{title:"Product Name",dataIndex:"items",scopedSlots:{customRender:"products"}}],c={name:"stockist-orders",layout:"dashboard",mixins:[o.a],data:function(){var t=this;return{showTable:"none",items:"",columns:l,week:"",dateFormat:"p d MMM, Y",excelFields:{Date:{field:"created_at",callback:function(e){return t.formatDate(e)}},"Sold by":"sold_by.full_name","Bought by":"bought_by.full_name",ID:"sold_by.referral",Product:{field:"items",callback:function(t){var e=t.map((function(t){return t.name})),n="<ul>";return e.forEach((function(t){n+="<li>".concat(t,"</li>")})),n+="</ul>"}},Code:{field:"items",callback:function(t){var e=t.map((function(t){return t.code})),n="<ul>";return e.forEach((function(code){n+="<li>".concat(code,"</li>")})),n+="</ul>"}},Qty:{field:"items",callback:function(t){var e=t.map((function(t){return t.qty})),n="<ul>";return e.forEach((function(t){n+="<li>".concat(t,"</li>")})),n+="</ul>"}},"Supply Status":{field:"items",callback:function(t){var e=t.map((function(t){return t.qty})),n="<ul>";return e.forEach((function(t){n+="<li>&nbsp;</li>"})),n+="</ul>"}}}}},methods:{getItems:function(){var t=this;setTimeout(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$post("admin/stockistOrders",{weekNumber:t.week});case 2:t.items=e.sent.data;case 3:case"end":return e.stop()}}),e)}))),3e3)},setWeek:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("date");case 2:t.week=e.sent;case 3:case"end":return e.stop()}}),e)})))()},printProduct:function(){return this.showTable="block",this.$nextTick((function(){var t=this.$refs.example,e=window.open("");e.document.write(t.outerHTML),e.print(),e.close(),this.showTable="none"})),!0}},mounted:function(){this.setWeek(),this.getItems()}},d=(n(1053),n(34)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-page-header",{attrs:{"sub-title":"Stockist Order"}}),t._v(" "),n("a-row",[n("a-col",{attrs:{md:{span:6},xs:{span:10}}},[n("a-input",{staticStyle:{"max-width":"188px","margin-bottom":"8px"},attrs:{placeholder:"Enter week number",min:"1",type:"number"},on:{change:t.getItems},model:{value:t.week,callback:function(e){t.week=e},expression:"week"}})],1),t._v(" "),t.isAdmin?n("a-col",{attrs:{md:{span:6},xs:{span:6}}},[n("div",{staticClass:"download"},[n("download-excel",{staticClass:"btn btn-primary",attrs:{data:t.items,fields:t.excelFields,worksheet:"My Worksheet",name:"week-"+t.week+".xls"}},[t._v("\n            Download\n          ")])],1)]):t._e()],1),t._v(" "),t.items?n("a-table",{attrs:{columns:t.columns,"data-source":t.items,rowKey:function(t){return t.id},scroll:{x:1500,y:300},size:"small"},scopedSlots:t._u([{key:"soldBy",fn:function(e){return n("span",{},[t._v("\n        "+t._s(e.full_name)),n("br"),t._v(" "),n("a-tag",{attrs:{color:"green"}},[t._v(t._s(e.referral))])],1)}},{key:"boughtBy",fn:function(e){return n("span",{},[t._v("\n        "+t._s(e.full_name)),n("br"),t._v(" "),n("a-tag",{attrs:{color:"green"}},[t._v(t._s(e.referral))])],1)}},{key:"date",fn:function(e){return n("span",{},[t._v(t._s(t.formatDate(e)))])}},{key:"products",fn:function(e){return n("span",{},[n("table",[n("thead",[n("tr",[n("th",{attrs:{width:"34%"}},[t._v("Product")]),t._v(" "),n("th",{attrs:{width:"33%"}},[t._v("Code")]),t._v(" "),n("th",{attrs:{width:"33%"}},[t._v("Qty")])])]),t._v(" "),n("tbody",t._l(e,(function(e){return n("tr",[n("td",{staticClass:"td"},[t._v(t._s(e.name))]),t._v(" "),n("td",{staticClass:"td"},[t._v(t._s(e.code))]),t._v(" "),n("td",{staticClass:"td"},[t._v(t._s(e.qty))])])})),0)])])}}],null,!1,568852600)}):t._e(),t._v(" "),n("table",{ref:"example",staticClass:"table table-hover table-bordered",style:{display:t.showTable}},[t._m(0),t._v(" "),n("tbody",t._l(t.items,(function(e){return t.items.length?n("tr",{key:e.id,staticClass:"pr-tr",staticStyle:{"border-bottom":"1px solid black","margin-bottom":"20px"}},[n("td",[t._v(t._s(t.formatDate(e.created_at)))]),t._v(" "),n("td",[t._v(t._s(e.sold_by.full_name)+" "),n("br"),t._v(" "),n("small",[t._v(t._s(e.sold_by.referral))])]),t._v(" "),e.items.length?n("td",t._l(e.items,(function(e){return n("div",[t._v("\n            "+t._s(e.name)+" - "+t._s(e.qty)+"\n")])})),0):t._e(),t._v(" "),t._m(1,!0)]):t._e()})),0)])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{width:"25%"}},[this._v("Date")]),this._v(" "),e("th",{attrs:{width:"20%"}},[this._v("Full name")]),this._v(" "),e("th",{attrs:{width:"50%"}},[this._v("Product/Qty")]),this._v(" "),e("th",{attrs:{width:"5%"}},[this._v("Supply Status")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("input",{attrs:{type:"checkbox"}})])}],!1,null,"0afd34d2",null);e.default=component.exports},901:function(t,e,n){"use strict";var r=n(904),o=n.n(r);e.a={methods:{formatDate:function(t){var e="";return t&&(e=o()(new Date(t),this.dateFormat)),e},getTime:function(t){var e="";return t&&(e=o()(new Date(t),this.dateFormat2)),e}}}},944:function(t,e,n){var content=n(1054);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(46).default)("960353e2",content,!0,{sourceMap:!1})}}]);