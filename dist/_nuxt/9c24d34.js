(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1010:function(t,e,r){"use strict";r(931)},1011:function(t,e,r){(e=r(45)(!1)).push([t.i,"img{height:100px}.items{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}.item{border:1px solid #d3cfcf;border-radius:5px;padding:20px;margin:24px}.del{color:#cb1212}.apart{display:flex;justify-content:space-between}.fa-cart-plus{cursor:pointer}.success{margin-top:10px;margin-bottom:10px;background:#09be09}.success,.success:hover{color:#fefefe;border:1px solid #08d208}.success:hover{background:#08d208}.ant-modal{width:50%!important}.hide{display:none}.disable{pointer-events:none;color:#d3d3d3}.cart-items{display:grid;grid-template-columns:100%;grid-gap:24px}.cart-item{display:grid;grid-template-columns:15% 25% 20% 10% 20% 5%;margin-bottom:15px}.icon{font-size:xx-large}@media (min-width:768px){.cart-items{grid-template-columns:70% 30%}}@media (max-width:767px){.ant-modal{width:90%!important}}",""]),t.exports=e},1085:function(t,e,r){"use strict";r.r(e);r(52),r(903),r(63),r(585),r(913),r(64),r(95);var n=r(27),c=(r(44),[{title:"Code",dataIndex:"code"},{title:"Name",dataIndex:"name"},{title:"Price",dataIndex:"price"},{title:"PV",dataIndex:"pv"},{title:"Quantity",scopedSlots:{customRender:"qty"}},{title:"Subtotal",scopedSlots:{customRender:"sub"}}]),o={name:"phreezone-special",layout:"dashboard",middleware:["stockist"],data:function(){return{cart:!1,loading:!1,searching:!1,columns:c,agentWallet:"",categories:"",products:[],searchQuery:"",selectedProducts:[],userReferral:"",upgradeUser:"",percentageRate:"",totalOrder:0,totalPv:0}},methods:{submitOrder:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.totalOrder>t.agentWallet)){e.next=2;break}return e.abrupt("return",t.$message.error("Insufficient amount in wallet"));case 2:if(t.products.length&&t.upgradeUser){e.next=4;break}return e.abrupt("return",t.$message.error("All fields are required"));case 4:return t.loading=!0,e.next=7,t.$axios.$post("user/saveOrders",{phreezoneSpecial:!0,soldBy:t.userId,boughtBy:t.upgradeUser.id,items:t.selectedProducts,totalAmount:t.totalOrder,totalPv:t.totalPv,totalNormalAmount:t.selectedProducts.reduce((function(t,e){return(+t+ +e.normalAmount).toFixed(2)}),0)});case 7:e.sent.success&&(t.$message.success("Added successfully"),location.reload());case 9:case"end":return e.stop()}}),e)})))()},getAgentWallet:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("admin/agentWallet/".concat(t.userId));case 2:t.agentWallet=e.sent.data;case 3:case"end":return e.stop()}}),e)})))()},getMember:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("user/null",{userReferral:t.userReferral});case 3:t.upgradeUser=e.sent.data,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.$message.error("Invalid Referral code entered");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},getProducts:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=!(t.length>0&&void 0!==t[0])||t[0],r.next=3,e.$axios.$get("admin/products?active=true&category=".concat(n));case 3:e.products=r.sent.data;case 4:case"end":return r.stop()}}),r)})))()},getPercentageRate:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("admin/percentageRate");case 2:t.percentageRate=e.sent.data;case 3:case"end":return e.stop()}}),e)})))()},getProductCategories:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("admin/product-category");case 2:t.categories=e.sent.data;case 3:case"end":return e.stop()}}),e)})))()},deleteSelectedProduct:function(t){this.selectedProducts=this.selectedProducts.filter((function(e){return e.id!=t})),this.totalOrder=this.selectedProducts.reduce((function(t,e){return(+t+ +e.amount).toFixed(2)}),0)},removeProduct:function(t,e){if(t.qty>1){var r=this.selectedProducts.findIndex((function(e){return e.id==t.id}));r>-1&&(t.qty=this.selectedProducts[r].qty-e,t.amount=t.qty*t.actual_amount,t.normalAmount=t.qty*+t.price,this.$set(this.selectedProducts,r,t))}this.totalOrder=this.selectedProducts.reduce((function(t,e){return(+t+ +e.amount).toFixed(2)}),0)},addProduct:function(t,e){if(0!=e){if(e){var r=this.selectedProducts.findIndex((function(e){return e.id==t.id}));r>-1?(t.qty=this.selectedProducts[r].qty+e,t.amount=t.qty*t.actual_amount,t.normalAmount=t.qty*+t.price,this.$set(this.selectedProducts,r,t)):(t.qty=e,t.amount=t.qty*t.actual_amount,t.normalAmount=t.qty*+t.price,this.selectedProducts.push(t))}this.totalOrder=this.selectedProducts.reduce((function(t,e){return(+t+ +e.amount).toFixed(2)}),0)}else this.selectedProducts=this.selectedProducts.filter((function(e){return e.id!=t.id}))},reset:function(){this.cart=!1,this.loading=!1,this.selectedProducts=[],this.userReferral="",this.upgradeUser="",this.totalOrder=0,this.totalPv=0},search:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.searchQuery){e.next=2;break}return e.abrupt("return");case 2:return t.searching=!0,e.next=5,t.$axios.$post("admin/product-search",{searchQuery:t.searchQuery});case 5:if(!(r=e.sent).data.length){e.next=10;break}return t.searching=!1,document.querySelector(".ant-tabs-nav-wrap").classList.add("hide"),e.abrupt("return",t.products=r.data);case 10:t.searching=!1;case 11:case"end":return e.stop()}}),e)})))()},resetProducts:function(){this.searchQuery="",document.querySelector(".ant-tabs-nav-wrap").classList.remove("hide"),this.getProducts()}},beforeMount:function(){this.getAgentWallet(),this.getProducts(),this.getProductCategories(),this.getPercentageRate()},watch:{selectedProducts:{handler:function(t){t.forEach((function(t,i){t.subPv=t.qty*t.pv})),this.totalPv=this.selectedProducts.reduce((function(t,e){return(+t+ +e.subPv).toFixed(2)}),0)},deep:!0}}},d=(r(1010),r(34)),component=Object(d.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("a-page-header",{attrs:{"sub-title":"Stream Upgrade Order"}}),t._v(" "),r("a-modal",{attrs:{visible:t.cart,footer:!1},on:{cancel:function(e){t.cart=!1}}},[t.selectedProducts.length?r("div",{staticClass:"cart-items"},[r("div",t._l(t.selectedProducts,(function(e){return r("div",{key:e.id,staticClass:"cart-item"},[r("img",{attrs:{src:e.image_path}}),t._v(" "),r("div",{staticClass:"ml-4"},[r("p",[t._v(t._s(e.name)+" "),r("br"),r("small",[t._v(t._s(e.code))])])]),t._v(" "),r("div",{staticClass:"ml-4 apart"},[r("a-icon",{staticClass:"icon",attrs:{type:"minus-circle"},on:{click:function(r){return t.removeProduct(e,1)}}}),t._v(" "),r("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(e.qty))]),t._v(" "),r("a-icon",{staticClass:"icon",attrs:{type:"plus-circle"},on:{click:function(r){return t.addProduct(e,1)}}})],1),t._v(" "),r("div",{staticClass:"ml-4"},[r("b",[t._v(t._s(e.subPv))]),r("br"),t._v(" "),r("small",[t._v(t._s(e.pv))])]),t._v(" "),r("div",{staticClass:"ml-4"},[r("b",[t._v(t._s(t._f("currency")(e.amount)))]),r("br"),t._v(" "),r("small",[t._v(t._s(t._f("currency")(e.price)))])]),t._v(" "),r("a-icon",{staticClass:"icon del",attrs:{type:"delete"},on:{click:function(r){return t.deleteSelectedProduct(e.id)}}})],1)})),0),t._v(" "),r("div",[r("p",[r("b",[t._v("Total Price:")]),t._v(" "+t._s(t._f("currency")(t.totalOrder)))]),t._v(" "),r("p",[r("b",[t._v("Total PV:")]),t._v(" "+t._s(t.totalPv))]),t._v(" "),r("a-button",{staticClass:"success",attrs:{loading:t.loading},on:{click:function(e){return e.preventDefault(),t.submitOrder(e)}}},[t._v("\n            Submit\n          ")]),t._v(" "),r("a-button",{attrs:{type:"primary"},on:{click:function(e){t.cart=!1}}},[t._v("\n              Continue Shopping\n            ")])],1)]):r("a-empty")],1),t._v(" "),r("a-row",{attrs:{type:"flex",justify:"space-between"}},[r("a-col",{attrs:{md:{span:6},xs:{span:24}}},[t.agentWallet?r("h5",[r("span",{staticStyle:{color:"grey"}},[t._v("Available Amount: ")]),t._v(t._s(t._f("currency")(t.agentWallet)))]):r("h5",[t._v("Available Amount: NGN 0.00")]),t._v(" "),r("br"),t._v(" "),t.upgradeUser?r("h6",[t._v(t._s(t.upgradeUser.full_name))]):t._e(),t._v(" "),r("a-input",{attrs:{placeholder:"Member code"},on:{blur:t.getMember},model:{value:t.userReferral,callback:function(e){t.userReferral=e},expression:"userReferral"}}),t._v(" "),r("br"),r("br"),t._v(" "),r("a-space",[r("a-input",{attrs:{placeholder:"Search Product"},on:{change:t.search},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),t._v(" "),r("a-button",{attrs:{type:"primary",loading:t.searching},on:{click:t.resetProducts}},[t._v("\n            "+t._s(t.searching?"Searching ... ":"Reset")+"\n          ")])],1),t._v(" "),r("br"),r("br")],1),t._v(" "),r("a-col",{attrs:{md:{span:6}}},[r("a-card",{staticStyle:{width:"230px"},attrs:{size:"small",title:"Product Order"}},[r("div",[t._v("Total Order Amount: "+t._s(t._f("currency")(t.totalOrder)))]),t._v(" "),r("div",[t._v("Total PV: "+t._s(t.totalPv))])]),t._v(" "),r("br"),t._v(" "),r("a-button",{attrs:{type:"primary"},on:{click:function(e){t.cart=!0}}},[t._v("View Cart")]),t._v(" "),r("a-button",{staticClass:"success",attrs:{loading:t.loading},on:{click:function(e){return e.preventDefault(),t.submitOrder(e)}}},[t._v("Submit")])],1)],1),t._v(" "),r("a-tabs",{on:{change:t.getProducts}},t._l(t.categories,(function(e){return r("a-tab-pane",{key:e.id,attrs:{tab:e.name}},[r("div",{staticClass:"items"},t._l(t.products,(function(e){return r("div",{staticClass:"item"},[r("img",{attrs:{src:e.image_path,alt:""}}),t._v(" "),r("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[r("span",{staticStyle:{"font-weight":"bolder"}},[t._v(t._s(e.name))]),r("br"),t._v("\n              "+t._s(e.code)+"\n            ")]),t._v(" "),r("p",{staticClass:"apart"},[r("span",[t._v(t._s(t._f("currency")(e.actual_amount))),r("br"),r("span",[t._v("PV: "+t._s(e.pv))])]),t._v(" "),r("a",{class:{disable:"0"==e.status},attrs:{href:"javascript:;"}},[r("i",{staticClass:"fa fa-cart-plus fa-2x",on:{click:function(r){return t.addProduct(e,1)}}})])])])})),0)])})),1)],1)}),[],!1,null,null,null);e.default=component.exports},903:function(t,e,r){"use strict";var n=r(28),c=r(138).findIndex,o=r(305),d=r(96),l=!0,f=d("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!f},{findIndex:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},913:function(t,e,r){"use strict";var n=r(28),c=r(165),o=r(914),d=r(590),l=r(38),f=1..toFixed,m=Math.floor,v=function(t,e,r){return 0===e?r:e%2==1?v(t,e-1,r*t):v(t*t,e/2,r)};n({target:"Number",proto:!0,forced:f&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){f.call({})}))},{toFixed:function(t){var e,r,n,l,f=o(this),h=c(t),data=[0,0,0,0,0,0],_="",x="0",y=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*data[r],data[r]=n%1e7,n=m(n/1e7)},P=function(t){for(var e=6,r=0;--e>=0;)r+=data[e],data[e]=m(r/t),r=r%t*1e7},w=function(){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=String(data[t]);s=""===s?e:s+d.call("0",7-e.length)+e}return s};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(_="-",f=-f),f>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(f*v(2,69,1))-69)<0?f*v(2,-e,1):f/v(2,e,1),r*=4503599627370496,(e=52-e)>0){for(y(0,r),n=h;n>=7;)y(1e7,0),n-=7;for(y(v(10,n,1),0),n=e-1;n>=23;)P(1<<23),n-=23;P(1<<n),y(1,1),P(2),x=w()}else y(0,r),y(1<<-e,0),x=w()+d.call("0",h);return x=h>0?_+((l=x.length)<=h?"0."+d.call("0",h-l)+x:x.slice(0,l-h)+"."+x.slice(l-h)):_+x}})},914:function(t,e,r){var n=r(140);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},931:function(t,e,r){var content=r(1011);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(46).default)("21975d4c",content,!0,{sourceMap:!1})}}]);