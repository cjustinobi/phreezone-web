(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1060:function(e,r,t){"use strict";t(948)},1061:function(e,r,t){(r=t(45)(!1)).push([e.i,"div[data-v-044410a3]{color:#639}",""]),e.exports=r},1104:function(e,r,t){"use strict";t.r(r);t(95);var n=t(27),o={name:"upgrade-order",layout:"dashboard",data:function(){return{amount:"",visible:!1,loading:!1,userReferral:"",upgradeUser:"",agentWallet:""}},methods:{upgrade:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.amount>e.agentWallet)){r.next=2;break}return r.abrupt("return",e.$message.error("Insufficient amount in wallet"));case 2:return e.loading=!0,r.next=5,e.$axios.$post("user/uploadConfirmation/null",{userReferral:e.userReferral,agentId:e.userId,amount:e.amount,status:"approved",isUpgrade:!0});case 5:r.sent.success?(e.loading=!1,e.agentWallet-=e.amount,e.amount="",e.userReferral="",e.upgradeUser="",e.$message.success("Confirmed payment successfully")):(e.loading=!1,e.$message.error("failed"));case 7:case"end":return r.stop()}}),r)})))()},getMember:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$axios.$post("user/null",{userReferral:e.userReferral});case 3:e.upgradeUser=r.sent.data,r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),e.$message.error("Invalid Referral code entered");case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},getAgentWallet:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.$get("admin/agentWallet/".concat(e.userId));case 2:e.agentWallet=r.sent.data;case 3:case"end":return r.stop()}}),r)})))()}},computed:{canUpgrade:function(){return!(""==this.amount||""==this.upgradeUser)}},mounted:function(){this.getAgentWallet(),this.$route.params.ref&&(this.userReferral=this.$route.params.ref,this.getMember())}},l=(t(1060),t(34)),component=Object(l.a)(o,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("a-page-header",{attrs:{"sub-title":"Upgrade Order"}},[t("template",{slot:"extra"},[t("a-button",{attrs:{type:"primary"},on:{click:function(){return e.$router.push({name:"stream-upgrade-order",params:{ref:e.userReferral}})}}},[e._v("\n        Or Stream Upgrade\n      ")])],1)],2),e._v(" "),e.agentWallet?t("h5",[e._v("Available Amount: "+e._s(e._f("currency")(e.agentWallet)))]):t("h5",[e._v("Available Amount: NGN 0.00")]),e._v(" "),t("br"),e._v(" "),e.upgradeUser?t("h6",[e._v(e._s(e.upgradeUser.full_name))]):e._e(),e._v(" "),t("a-row",{attrs:{gutter:4}},[t("a-col",{attrs:{md:{span:4},xs:{span:24}}},[t("a-input",{attrs:{placeholder:"Member code"},on:{blur:e.getMember},model:{value:e.userReferral,callback:function(r){e.userReferral=r},expression:"userReferral"}}),e._v(" "),t("br"),t("br")],1),e._v(" "),t("a-col",{attrs:{md:{span:4},xs:{span:24}}},[t("a-select",{staticStyle:{width:"295px"},model:{value:e.amount,callback:function(r){e.amount=r},expression:"amount"}},[t("a-select-option",{attrs:{value:""}},[e._v("Select Package")]),e._v(" "),e._l(e.amounts,(function(r,i){return t("a-select-option",{key:i,attrs:{value:r.amount}},[e._v(e._s(r.title))])}))],2)],1),e._v(" "),t("a-col",{staticStyle:{"margin-top":"12px"},attrs:{span:24}},[t("a-popconfirm",{attrs:{title:"Are you sure upgrading "+e.upgradeUser.full_name+"?","ok-text":"Yes","cancel-text":"No"},on:{confirm:e.upgrade,cancel:function(r){e.visible=!1}}},[t("a-button",{attrs:{type:"primary",loading:e.loading,disabled:0==e.canUpgrade}},[e._v("Upgrade")])],1)],1)],1)],1)}),[],!1,null,"044410a3",null);r.default=component.exports},948:function(e,r,t){var content=t(1061);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(46).default)("2e316740",content,!0,{sourceMap:!1})}}]);