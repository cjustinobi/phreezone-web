(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1045:function(e,t,r){"use strict";r(940)},1046:function(e,t,r){(t=r(45)(!1)).push([e.i,".shares[data-v-0450d60a]{margin:30px 0}",""]),e.exports=t},1047:function(e,t,r){"use strict";r(941)},1048:function(e,t,r){(t=r(45)(!1)).push([e.i,".shareholders[data-v-7a7baa61]{margin-top:30px}",""]),e.exports=t},1049:function(e,t,r){"use strict";r(942)},1050:function(e,t,r){(t=r(45)(!1)).push([e.i,"div[data-v-5481f916]{color:#639}.am[data-v-5481f916]{margin-bottom:0}.sponsor[data-v-5481f916]{margin-top:30px}",""]),e.exports=t},1094:function(e,t,r){"use strict";r.r(t);r(95);var n=r(27),o=r(955),l=r(956),c=r(957),d={name:"shareholder",layout:"dashboard",components:{Shares:o.default,Shareholders:c.default,ShareholdingForm:l.default},data:function(){return{amount:"",visible:!1,loading:!1,showCreateShare:!1,sponsor:"",sponsorRef:"",shareholder:"",shareholderRef:"",sponsorWallet:"",slot:"",share:""}},methods:{saveShareholder:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.share){t.next=2;break}return t.abrupt("return",e.$message.error("No available share found"));case 2:if(!(e.share.price*e.slot>e.sponsorWallet)){t.next=4;break}return t.abrupt("return",e.$message.error("Insufficient amount in wallet"));case 4:return e.loading=!0,t.next=7,e.$axios.$post("admin/shareholders",{stockist_id:e.userId,user_id:e.shareholder.id,sponsor_id:e.sponsor.id,amount:e.amount,slot:e.slot,status:"approved"});case 7:(r=t.sent).success?(window.location.reload(),e.loading=!1,e.sponsorWallet-=e.amount,e.amount="",e.sponsor="",e.shareholder="",e.$message.success("Confirmed payment successfully")):(e.loading=!1,e.$message.error(r.message));case 9:case"end":return t.stop()}}),t)})))()},getMember:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],r.prev=1,!n){r.next=8;break}return r.next=5,t.$axios.$post("user/null",{userReferral:t.shareholderRef});case 5:t.shareholder=r.sent.data,r.next=11;break;case 8:return r.next=10,t.$axios.$post("user/null",{userReferral:t.sponsorRef});case 10:t.sponsor=r.sent.data;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),t.$message.error("Invalid Referral code entered");case 16:case"end":return r.stop()}}),r,null,[[1,13]])})))()},getSponsorWallet:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("admin/sponsorWallet/".concat(e.userId));case 2:e.sponsorWallet=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},getActiveShare:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("admin/activeShare");case 2:e.share=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()}},computed:{canUpgrade:function(){return!(!this.sponsor||!this.shareholder)}},beforeMount:function(){this.getSponsorWallet(),this.getActiveShare()}},h=(r(1049),r(34)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-page-header",{attrs:{"sub-title":"Shareholder"}},[e.isAdmin?r("template",{slot:"extra"},[r("a-button",{attrs:{type:"primary"},on:{click:function(t){e.showCreateShare=!0}}},[e._v("\n        Create Shares\n      ")])],1):e._e()],2),e._v(" "),e.isAdmin?r("Shares"):e._e(),e._v(" "),r("a-modal",{attrs:{title:"Create Shares",footer:null},model:{value:e.showCreateShare,callback:function(t){e.showCreateShare=t},expression:"showCreateShare"}},[r("ShareholdingForm")],1),e._v(" "),e.sponsorWallet?r("h5",{staticClass:"am"},[e._v("Available Amount: "+e._s(e._f("currency")(e.sponsorWallet)))]):r("h5",[e._v("Available Amount: NGN 0.00")]),e._v(" "),r("br"),e._v(" "),e.slot&&e.share?r("small",[e._v("Total Amount: "+e._s(e._f("currency")(+e.slot*e.share.price)))]):e._e(),e._v(" "),e.sponsor?r("h6",{staticClass:"sponsor"},[e._v("Sponsor: "+e._s(e.sponsor.full_name))]):e._e(),e._v(" "),e.shareholder?r("h6",[e._v("Member: "+e._s(e.shareholder.full_name))]):e._e(),e._v(" "),r("a-row",{attrs:{gutter:4}},[r("a-col",{attrs:{md:{span:4},xs:{span:24}}},[r("a-input",{attrs:{placeholder:"Sponsor code"},on:{blur:function(t){return e.getMember(!1)}},model:{value:e.sponsorRef,callback:function(t){e.sponsorRef=t},expression:"sponsorRef"}}),e._v(" "),r("br"),r("br"),e._v(" "),r("a-input",{attrs:{placeholder:"Member code"},on:{blur:function(t){return e.getMember(!0)}},model:{value:e.shareholderRef,callback:function(t){e.shareholderRef=t},expression:"shareholderRef"}}),e._v(" "),r("br"),r("br"),e._v(" "),r("a-input",{attrs:{type:"number",placeholder:"Number of slots"},model:{value:e.slot,callback:function(t){e.slot=t},expression:"slot"}})],1),e._v(" "),r("a-col",{staticStyle:{"margin-top":"12px"},attrs:{span:24}},[r("a-popconfirm",{attrs:{title:"About to purchase slot for "+e.shareholder.full_name+"?","ok-text":"Yes","cancel-text":"No"},on:{confirm:e.saveShareholder,cancel:function(t){e.visible=!1}}},[r("a-button",{attrs:{type:"primary",loading:e.loading,disabled:0==e.canUpgrade}},[e._v("\n            Buy Slot\n          ")])],1)],1)],1),e._v(" "),r("Shareholders")],1)}),[],!1,null,"5481f916",null);t.default=component.exports;installComponents(component,{Shares:r(955).default,ShareholdingForm:r(956).default,Shareholders:r(957).default})},901:function(e,t,r){"use strict";var n=r(904),o=r.n(n);t.a={methods:{formatDate:function(e){var t="";return e&&(t=o()(new Date(e),this.dateFormat)),t},getTime:function(e){var t="";return e&&(t=o()(new Date(e),this.dateFormat2)),t}}}},940:function(e,t,r){var content=r(1046);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(46).default)("9c5d8558",content,!0,{sourceMap:!1})},941:function(e,t,r){var content=r(1048);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(46).default)("19b809a2",content,!0,{sourceMap:!1})},942:function(e,t,r){var content=r(1050);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(46).default)("12eb01bb",content,!0,{sourceMap:!1})},955:function(e,t,r){"use strict";r.r(t);r(95);var n=r(27),o=[{title:"Slots",dataIndex:"qty"},{title:"Sold",dataIndex:"sold"},{title:"Available",scopedSlots:{customRender:"available"}},{title:"Dividend",dataIndex:"dividend",scopedSlots:{customRender:"dividend"}},{title:"Status",dataIndex:"available",scopedSlots:{customRender:"active"}},{title:"Actions",scopedSlots:{customRender:"action"}}],l={data:function(){return{visible:!1,loading:!1,declareDividend:!1,selectedShare:"",columns:o,dividend:"",shares:[]}},methods:{getShares:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("admin/shares");case 2:e.shares=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},saveDividend:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$post("admin/set-dividend/".concat(e.selectedShare),{dividend:e.dividend});case 2:t.sent.success&&(e.getShares(),e.dividend="",e.visible=!1,e.$message.success("Dividend added"));case 4:case"end":return t.stop()}}),t)})))()},shareDividend:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.$get("admin/declare-dividend/".concat(e));case 2:r.sent.success&&t.$message.success("Dividend declared");case 4:case"end":return r.stop()}}),r)})))()},showDividend:function(e){this.selectedShare=e,this.visible=!0}},beforeMount:function(){this.getShares()}},c=(r(1045),r(34)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shares"},[r("h5",[e._v("Shares")]),e._v(" "),r("a-table",{attrs:{columns:e.columns,"data-source":e.shares,rowKey:function(e){return e.id},size:"small",defaultPageSize:"50"},scopedSlots:e._u([{key:"active",fn:function(t){return r("span",{},[r("a-tag",{attrs:{color:"1"==t?"green":"volcano"}},[e._v("\n        "+e._s("1"==t?"Active":"Sold Out")+"\n      ")])],1)}},{key:"available",fn:function(t){return r("span",{},[e._v(e._s(t.qty-t.sold))])}},{key:"dividend",fn:function(t){return r("span",{},[e._v(e._s(e._f("currency")(t)))])}},{key:"action",fn:function(t){return r("a-dropdown",{attrs:{href:"javascript:;"}},[r("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[r("a-menu-item",{key:"1"},[r("a-popconfirm",{attrs:{title:"About to declare dividend?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(r){return e.shareDividend(t.id)},cancel:function(t){e.declareDividend=!1}}},[r("a",{attrs:{href:"#"}},[e._v("Declare Dividend")])])],1),e._v(" "),r("a-menu-item",{key:"2"},[r("a",{attrs:{href:"javascript:;"},on:{click:function(r){return e.showDividend(t.id)}}},[e._v("Add Dividend")])])],1),e._v(" "),r("a-icon",{attrs:{type:"more"}})],1)}}])}),e._v(" "),r("a-modal",{attrs:{title:"Add Dividend","confirm-loading":e.loading},on:{cancel:function(t){e.visible=!1},ok:e.saveDividend},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("a-input",{attrs:{placeholder:"Dividend"},model:{value:e.dividend,callback:function(t){e.dividend=t},expression:"dividend"}})],1)],1)}),[],!1,null,"0450d60a",null);t.default=component.exports},956:function(e,t,r){"use strict";r.r(t);r(95);var n=r(27),o={name:"ShareholdingForm",data:function(){return{loading:!1,details:{qty:"",price:""}}},methods:{saveShare:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.details.qty||e.details.price){t.next=2;break}return t.abrupt("return",e.$message.error("All fields are required"));case 2:return e.loading=!0,t.next=5,e.$axios.$post("admin/shares",e.details);case 5:(r=t.sent.data)&&(e.loading=!1,window.location.reload()),console.log(r);case 8:case"end":return t.stop()}}),t)})))()}}},l=r(34),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-row",{attrs:{gutter:4}},[r("a-col",[r("a-input",{attrs:{placeholder:"Number of Slots"},model:{value:e.details.qty,callback:function(t){e.$set(e.details,"qty",e._n(t))},expression:"details.qty"}}),e._v(" "),r("br"),r("br"),e._v(" "),r("a-input",{attrs:{placeholder:"Price per slot"},model:{value:e.details.price,callback:function(t){e.$set(e.details,"price",t)},expression:"details.price"}}),e._v(" "),r("br"),r("br"),e._v(" "),r("a-button",{attrs:{type:"primary"},on:{click:e.saveShare}},[e._v("\n        "+e._s(e.loading?"Saving ...":"Save")+"\n      ")])],1)],1)],1)}),[],!1,null,"10190915",null);t.default=component.exports},957:function(e,t,r){"use strict";r.r(t);r(52),r(95);var n=r(27),o=r(901),l=[{title:"Full Name",dataIndex:"user",scopedSlots:{customRender:"user"}},{title:"Sponsor",dataIndex:"sponsor",scopedSlots:{customRender:"sponsor"}},{title:"Slot",dataIndex:"slot"},{title:"Date",dataIndex:"created_at",scopedSlots:{customRender:"date"}}],c={mixins:[o.a],data:function(){return{columns:l,shareholders:[],dateFormat:"p d MMM, Y"}},methods:{getShareholders:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("admin/shareholders");case 2:e.shareholders=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()}},computed:{filteredShareholders:function(){var e=this;return this.isAdmin?this.shareholders:this.shareholders.length?this.shareholders.filter((function(t){return t.id==e.userId})):[]}},beforeMount:function(){this.getShareholders()}},d=(r(1047),r(34)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shareholders"},[r("h5",[e._v("Shareholders")]),e._v(" "),r("a-table",{attrs:{columns:e.columns,"data-source":e.filteredShareholders,rowKey:function(e){return e.id},scroll:{x:1500,y:300},size:"small",defaultPageSize:"50"},scopedSlots:e._u([{key:"user",fn:function(t){return r("span",{},[r("span",[e._v(e._s(t.full_name))]),r("br"),e._v(" "),r("a-tag",{attrs:{color:"green"}},[e._v(e._s(t.referral))])],1)}},{key:"sponsor",fn:function(t){return r("span",{},[r("span",[e._v(e._s(t.full_name))]),r("br"),e._v(" "),r("a-tag",{attrs:{color:"green"}},[e._v(e._s(t.referral))])],1)}},{key:"date",fn:function(t){return r("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)}),[],!1,null,"7a7baa61",null);t.default=component.exports}}]);