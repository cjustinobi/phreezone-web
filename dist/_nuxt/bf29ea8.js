(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1066:function(e,t,n){"use strict";n(950)},1067:function(e,t,n){(t=n(45)(!1)).push([e.i,".pagination[data-v-a04698a6]{display:inline-block;float:right;margin-top:20px}.pagination a[data-v-a04698a6]{color:#000;padding:8px 16px;text-decoration:none;border:1px solid #ddd!important}",""]),e.exports=t},1106:function(e,t,n){"use strict";n.r(t);n(903),n(139),n(48),n(83),n(166),n(164),n(95);var r=n(27),o=(n(181),void 0),c=[{title:"Full Name",dataIndex:"full_name",fixed:"left",scopedSlots:{customRender:"fullName",filterDropdown:"filterDropdown",filterIcon:"filterIcon"},onFilter:function(e,t){return t.full_name.toString().toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){o.searchInput.focus()}),0)}},{title:"Phone",dataIndex:"phone",width:"15%"},{title:"Package",dataIndex:"package.name",scopedSlots:{customRender:"pkg"},width:"10%"},{title:"Sponsor ID",dataIndex:"referral",width:"10%"},{title:"Status",dataIndex:"active",scopedSlots:{customRender:"active"},width:"10%"},{title:"Action",scopedSlots:{customRender:"action"},width:"15%"}],l={name:"users",layout:"dashboard",validate:function(e){e.app,e.params,e.query;return 1==e.store.$auth.$state.user.userType},data:function(){return{users:"",userReferral:"",loading:!1,visible:!1,userDelete:!1,columns:c}},methods:{getUsers:function(){var e=arguments,t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:0,t.loading=!0,n.next=4,t.$axios.$post("admin/users",{userReferral:r});case 4:(o=n.sent)&&(t.loading=!1,t.users=o);case 6:case"end":return n.stop()}}),n)})))()},handleSearch:function(e,t,n){t()},disableEnableStockist:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.$post("admin/disableEnableStockist/".concat(e));case 2:r=n.sent,r.success&&(o=t.users.data.findIndex((function(t){return t.id==e})),t.users.data[o].isAgent=!t.users[o].isAgent,t.$message.success("User updated"));case 5:case"end":return n.stop()}}),n)})))()},deleteUser:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.$delete("admin/users/".concat(e));case 2:r=n.sent,r.success&&(t.getUsers(),t.$message.success("User deleted"));case 5:case"end":return n.stop()}}),n)})))()},handleReset:function(e){e()},firstPage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.$post(e.users.first_page_url);case 3:(n=t.sent)&&(e.loading=!1,e.users=n);case 5:case"end":return t.stop()}}),t)})))()},lastPage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.$post(e.users.last_page_url);case 3:(n=t.sent)&&(e.loading=!1,e.users=n);case 5:case"end":return t.stop()}}),t)})))()},prevPage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.$post(e.users.prev_page_url);case 3:(n=t.sent)&&(e.loading=!1,e.users=n);case 5:case"end":return t.stop()}}),t)})))()},nextPage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.$post(e.users.next_page_url);case 3:(n=t.sent)&&(e.loading=!1,e.users=n);case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getUsers()}},d=(n(1066),n(34)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-page-header",{attrs:{"sub-title":"All Users"}},[n("template",{slot:"extra"},[n("a-button",{attrs:{type:"primary"},on:{click:function(){return e.$router.push("/register")}}},[e._v("Add New Member")])],1)],2),e._v(" "),e.users&&e.users.data.length?n("a-input-search",{staticStyle:{width:"188px","margin-bottom":"8px"},attrs:{placeholder:"Sponsor ID"},on:{search:function(t){return e.getUsers(e.userReferral)}},model:{value:e.userReferral,callback:function(t){e.userReferral=t},expression:"userReferral"}}):e._e(),e._v(" "),e.users.data?n("a-table",{attrs:{columns:e.columns,"data-source":e.users.data,rowKey:function(e){return e.id},scroll:{x:1500,y:300},size:"small",pagination:!1},scopedSlots:e._u([{key:"action",fn:function(text){return n("a-dropdown",{attrs:{href:"javascript:;"}},[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[text.active?n("a-menu-item",{key:"1"},[n("a-popconfirm",{attrs:{title:"Sure you want to "+(1==text.isAgent?"disable":"enable")+" stockist?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.disableEnableStockist(text.id)},cancel:function(t){e.visible=!1}}},[n("a",{attrs:{href:"#"}},[e._v(e._s(1==text.isAgent?"Disable Stockist":"Enable Stockist"))])])],1):e._e(),e._v(" "),n("a-menu-item",{key:"2"},[n("nuxt-link",{attrs:{to:{name:"users-id",params:{id:text.id,user:text}}}},[e._v("Edit")])],1),e._v(" "),n("a-menu-item",{key:"3"},[n("a-popconfirm",{attrs:{title:"Sure you want to delete "+text.full_name,"ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.deleteUser(text.id)},cancel:function(t){e.userDelete=!1}}},[n("a",{attrs:{href:"#"}},[e._v("Delete")])])],1)],1),e._v(" "),n("a-button",[e._v(" Actions "),n("a-icon",{attrs:{type:"down"}})],1)],1)}},{key:"filterDropdown",fn:function(t){var r=t.setSelectedKeys,o=t.selectedKeys,c=t.confirm,l=t.clearFilters,d=t.column;return n("div",{staticStyle:{padding:"8px"}},[n("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(t){return e.searchInput=t},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Search "+d.dataIndex,value:o[0]},on:{change:function(e){return r(e.target.value?[e.target.value]:[])},pressEnter:function(){return e.handleSearch(o,c,d.dataIndex)}}}),e._v(" "),n("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return e.handleSearch(o,c,d.dataIndex)}}},[e._v("\n        Search\n      ")]),e._v(" "),n("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return e.handleReset(l)}}},[e._v("\n        Reset\n      ")])],1)}},{key:"active",fn:function(t){return n("span",{},[n("a-tag",{attrs:{color:"0"==t?"volcano":"green"}},[e._v("\n        "+e._s("0"==t?"Not Active":"Active")+"\n      ")])],1)}},{key:"fullName",fn:function(t,r){return n("span",{},[n("span",[e._v(e._s(t))]),e._v(" "),n("br"),e._v(" "),"1"==r.isAgent?n("a-tag",{attrs:{color:"green"}},[e._v("Agent")]):e._e()],1)}},{key:"pkg",fn:function(t){return n("span",{},[e._v(e._s(null==t?"N/P":t))])}}],null,!1,2386588953)}):e._e(),e._v(" "),e.users&&e.users.data.length?n("div",{staticClass:"pagination"},[n("a",{attrs:{href:"#"},on:{click:e.firstPage}},[e._v("«")]),e._v(" "),n("a",{attrs:{href:"#",disabled:null==e.users.prev_page_url},on:{click:e.prevPage}},[e._v("<")]),e._v(" "),n("a",{attrs:{href:"#"}},[e._v(e._s(e.users.current_page)+" of "+e._s(e.users.last_page))]),e._v(" "),n("a",{attrs:{href:"#",disabled:null==e.users.next_page_url},on:{click:e.nextPage}},[e._v(">")]),e._v(" "),n("a",{attrs:{href:"#"},on:{click:e.lastPage}},[e._v("»")])]):e._e(),e._v(" "),n("a-modal",{attrs:{visible:e.loading,footer:null}},[n("a-spin",{staticStyle:{display:"flex","justify-content":"center"}},[n("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1)],1)}),[],!1,null,"a04698a6",null);t.default=component.exports},903:function(e,t,n){"use strict";var r=n(28),o=n(138).findIndex,c=n(305),l=n(96),d=!0,f=l("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){d=!1})),r({target:"Array",proto:!0,forced:d||!f},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c("findIndex")},950:function(e,t,n){var content=n(1067);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(46).default)("55595de8",content,!0,{sourceMap:!1})}}]);