(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1099:function(e,t,r){"use strict";r.r(t);r(585),r(164),r(95);var n=r(27),o=r(901),l=[{title:"Full Name",dataIndex:"user",scopedSlots:{customRender:"user"}},{title:"Stockist",dataIndex:"stockist",scopedSlots:{customRender:"stockist"}},{title:"Amount",dataIndex:"amount",scopedSlots:{customRender:"amount"}},{title:"Date",dataIndex:"created_at",scopedSlots:{customRender:"date"}},{title:"View Items",dataIndex:"ids",scopedSlots:{customRender:"ids"}}],c=[{title:"Full Name",dataIndex:"user.full_name"},{title:"Sponsor ID",dataIndex:"user.referral"},{title:"Item",dataIndex:"item"},{title:"Date",dataIndex:"created_at",scopedSlots:{customRender:"date"}},{title:"Amount",key:"amount",dataIndex:"amount",scopedSlots:{customRender:"amount"}}],d={name:"sales-list",layout:"dashboard",mixins:[o.a],data:function(){return{sales:"",columns:l,columns2:c,week:"",soldItems:"",showSoldItems:!1,customer:"",userReferral:"",totalSales:"",dateFormat:"d MMM, Y"}},methods:{getSales:function(){var e=this;setTimeout(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$post("user/sales",{weekNumber:e.week,userId:e.customer.id});case 2:e.sales=t.sent.data;case 3:case"end":return t.stop()}}),t)}))),3e3)},getItems:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.$post("user/soldItems",{ids:e});case 2:(n=r.sent).success&&(t.soldItems=n.data,t.showSoldItems=!0);case 4:case"end":return r.stop()}}),r)})))()},setWeek:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("date");case 2:e.week=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getMember:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$post("user/null",{userReferral:e.userReferral});case 3:(r=t.sent).data&&(e.customer=r.data,e.getSales()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$message.error("Invalid Referral code entered");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){this.setWeek(),this.getSales()},watch:{sales:{handler:function(e){e.length?this.totalSales=e.reduce((function(e,t){return+e+ +t.amount}),0):this.totalSales=0},immediate:!0}}},m=r(34),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-page-header",{attrs:{"sub-title":"List of Stockist Sales"}}),e._v(" "),r("div",{staticStyle:{background:"#ECECEC",padding:"30px","margin-bottom":"28px"}},[r("a-row",{attrs:{gutter:4}},[r("a-col",{attrs:{md:8,xs:24}},[r("a-card",[r("a-statistic",{staticStyle:{"margin-right":"50px"},attrs:{title:"Total Sales for week "+e.week,value:e._f("currency")(e.totalSales),precision:2,"value-style":{color:"#3f8600"}}})],1)],1)],1)],1),e._v(" "),e.customer?r("h6",[e._v(e._s(e.customer.full_name))]):e._e(),e._v(" "),r("a-row",[r("a-col",{attrs:{span:"6"}},[r("a-input",{staticStyle:{width:"188px","margin-bottom":"8px"},attrs:{placeholder:"Enter week number",min:"1",type:"number"},on:{change:e.getSales},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}})],1),e._v(" "),e.isAdmin?r("a-col",{attrs:{span:"6"}},[r("a-input-search",{staticStyle:{width:"188px","margin-bottom":"8px"},attrs:{placeholder:"Sponsor ID"},on:{search:e.getMember},model:{value:e.userReferral,callback:function(t){e.userReferral=t},expression:"userReferral"}})],1):e._e()],1),e._v(" "),r("a-modal",{attrs:{title:"Sold Items for week "+e.week,footer:null},model:{value:e.showSoldItems,callback:function(t){e.showSoldItems=t},expression:"showSoldItems"}},[e.soldItems?r("a-table",{attrs:{columns:e.columns2,"data-source":e.soldItems,rowKey:function(e){return e.id},size:"small"},scopedSlots:e._u([{key:"date",fn:function(t){return r("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"ids",fn:function(t,n){return r("span",{},[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.getItems(t)}}},[e._v("View")])])}}],null,!1,1263385991)}):e._e()],1),e._v(" "),e.sales?r("a-table",{attrs:{columns:e.columns,"data-source":e.sales,rowKey:function(e){return e.id},size:"small"},scopedSlots:e._u([{key:"date",fn:function(t){return r("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"ids",fn:function(t,n){return r("span",{},[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.getItems(t)}}},[e._v("View")])])}},{key:"user",fn:function(t){return r("span",{},[r("span",[e._v(e._s(t.full_name))]),r("br"),e._v(" "),r("a-tag",{attrs:{color:"green"}},[e._v(e._s(t.referral))])],1)}},{key:"stockist",fn:function(t){return r("span",{},[r("span",[e._v(e._s(t.full_name))]),r("br"),e._v(" "),r("a-tag",{attrs:{color:"green"}},[e._v(e._s(t.referral))])],1)}}],null,!1,2665801095)}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports},901:function(e,t,r){"use strict";var n=r(904),o=r.n(n);t.a={methods:{formatDate:function(e){var t="";return e&&(t=o()(new Date(e),this.dateFormat)),t},getTime:function(e){var t="";return e&&(t=o()(new Date(e),this.dateFormat2)),t}}}}}]);