(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1041:function(e,t,n){"use strict";n(938)},1042:function(e,t,n){(t=n(45)(!1)).push([e.i,"img[data-v-2b7a50da]{width:120px}.spin[data-v-2b7a50da]{display:grid;grid-template-columns:1fr;justify-content:center}",""]),e.exports=t},1090:function(e,t,n){"use strict";n.r(t);n(52),n(95);var o=n(27),r=n(901),l=[{title:"Image",dataIndex:"image_path",scopedSlots:{customRender:"image"}},{title:"Title",dataIndex:"title",scopedSlots:{customRender:"promoTitle"}},{title:"Point",dataIndex:"pv",scopedSlots:{customRender:"point"}},{title:"Personal Point",dataIndex:"personal_points",scopedSlots:{customRender:"pp"}},{title:"Balanced Leg",dataIndex:"balanced_leg",scopedSlots:{customRender:"bl"}},{title:"Start",dataIndex:"start_date",scopedSlots:{customRender:"start"}},{title:"End",dataIndex:"end_date",scopedSlots:{customRender:"end"}},{title:"Actions",scopedSlots:{customRender:"action"}}],c=[{title:"Full Name",dataIndex:"parent",scopedSlots:{customRender:"name"},fixed:"left"},{title:"PP",dataIndex:"point",scopedSlots:{customRender:"pp"}},{title:"Total PV",scopedSlots:{customRender:"tp"}}],d={layout:"dashboard",name:"promo",mixins:[r.a],data:function(){return{loading:!1,showQualifiers:!1,qualifierColumns:c,columns:l,qualifiers:"",promos:"",selectedPromo:"",dateFormat:"d MMM, Y",excelFields:{Fullname:"user.full_name",PP:"point","Total PV":{field:"user",callback:function(e){return console.log(e),JSON.stringify(e)}}}}},methods:{getPromos:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("admin/promos");case 2:e.promos=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},deletePromo:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.$delete("admin/promos/".concat(e));case 2:n.sent.success&&(t.$message.success("Promo Deleted"),t.promos=t.promos.filter((function(t){return t.id!=e})));case 4:case"end":return n.stop()}}),n)})))()},getQualifiers:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.loading=!0,n.next=4,t.$axios.$post("admin/promo-qualifiers/".concat(e.id));case 4:(o=n.sent.data)&&(r=function(data){return data.sort((function(a,b){return a.id-b.id}))},t.loading=!1,l=t.isAdmin?o:o.filter((function(e){return e.user_id==t.userId})),t.qualifiers=r(l),t.showQualifiers=!0,t.selectedPromo=e),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t.loading=!1;case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},beforeMount:function(){this.getPromos()}},f=(n(1041),n(34)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-page-header",{attrs:{"sub-title":"Promos"}},[e.isAdmin?n("template",{slot:"extra"},[n("a-button",{attrs:{type:"primary"},on:{click:function(){return e.$router.push("/add-promo")}}},[e._v("Add Promo")])],1):e._e()],2),e._v(" "),n("a-modal",{attrs:{footer:null},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[n("div",{staticClass:"spin"},[n("p",[e._v("This might take a while")]),e._v(" "),n("a-spin",{attrs:{indicator:!0}})],1)]),e._v(" "),n("a-modal",{attrs:{title:"Members",footer:null},model:{value:e.showQualifiers,callback:function(t){e.showQualifiers=t},expression:"showQualifiers"}},[e.qualifiers.length?n("a-table",{attrs:{columns:e.qualifierColumns,"data-source":e.qualifiers,rowKey:function(e){return e.id},size:"small",scroll:{x:800,y:300}},scopedSlots:e._u([{key:"name",fn:function(t){return n("span",{},[e._v("\n        "+e._s(t.full_name)),n("br"),e._v(" "),n("a-tag",{attrs:{color:"green"}},[e._v("\n          "+e._s(t.referral)+"\n        ")])],1)}},{key:"tp",fn:function(t,o){return e.selectedPromo.balanced_leg?n("span",{},[o.hasOwnProperty("left_downline_points")?n("span",[e._v("\n          LL "+e._s(o.left_downline_points?o.left_downline_points.toFixed(2)+"/"+e.selectedPromo.leg_pv:"0/"+e.selectedPromo.leg_pv)+"\n          "),n("a-tag",{attrs:{color:o.left_downline_points>=e.selectedPromo.leg_pv?"green":"volcano"}},[e._v("\n          "+e._s(o.left_downline_points>=e.selectedPromo.leg_pv?"Qualified":"Not Qualified")+"\n          ")])],1):n("span",[e._v("LL 0/"+e._s(e.selectedPromo.leg_pv)+" "),n("a-tag",{attrs:{color:"volcano"}},[e._v("Not Qualified")])],1),e._v(" "),n("br"),e._v(" "),o.hasOwnProperty("right_downline_points")?n("span",[e._v("\n          RL "+e._s(o.right_downline_points?o.right_downline_points.toFixed(2)+"/"+e.selectedPromo.leg_pv:"0/"+e.selectedPromo.leg_pv)+"\n          "),n("a-tag",{attrs:{color:o.right_downline_points>=e.selectedPromo.leg_pv?"green":"volcano"}},[e._v("\n          "+e._s(o.right_downline_points>=e.selectedPromo.leg_pv?"Qualified":"Not Qualified")+"\n          ")])],1):n("span",[e._v("RL 0/"+e._s(e.selectedPromo.leg_pv)+" "),n("a-tag",{attrs:{color:"volcano"}},[e._v("Not Qualified")])],1)]):e._e()}},{key:"pp",fn:function(t,o){return e.selectedPromo.balanced_leg?n("span",{},[e._v("\n        "+e._s(t)+"/"+e._s(e.selectedPromo.pv)+"\n        "),n("a-tag",{attrs:{color:t>=e.selectedPromo.pv?"green":"volcano"}},[e._v("\n        "+e._s(t>=e.selectedPromo.pv?"Qualified":"Not Qualified")+"\n        ")])],1):e._e()}}],null,!0)}):n("a-empty")],1),e._v(" "),e.promos?n("a-table",{attrs:{columns:e.columns,"data-source":e.promos,rowKey:function(e){return e.id},scroll:{x:1e3,y:300},size:"small",pagination:{pageSize:50}},scopedSlots:e._u([{key:"promoTitle",fn:function(t,o){return n("a-button",{attrs:{type:"link"},on:{click:function(t){return e.getQualifiers(o)}}},[e._v("\n      "+e._s(t)+"\n    ")])}},{key:"image",fn:function(image){return n("span",{},[n("img",{attrs:{src:image}})])}},{key:"point",fn:function(t,o){return n("span",{},[e._v("\n      Personal Point: "),n("b",[e._v(e._s(t))]),e._v(" "),n("br"),e._v(" "),o.balanced_leg?n("span",[e._v("Each leg point: "),n("b",[e._v(e._s(o.leg_pv))])]):e._e()])}},{key:"pp",fn:function(t){return n("span",{},[e._v(e._s("0"==t?"No":"Yes"))])}},{key:"bl",fn:function(t){return n("span",{},[e._v(e._s("0"==t?"No":"Yes"))])}},{key:"start",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"end",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(text){return e.isAdmin?n("span",{},[n("a-popconfirm",{attrs:{title:"Sure you want to delete Promo?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.deletePromo(text.id)},cancel:function(t){e.visible=!1}}},[n("a",{attrs:{href:"#"}},[e._v("Delete")])])],1):e._e()}},{key:"active",fn:function(t){return n("span",{},[n("a-tag",{attrs:{color:"0"==t?"volcano":"green"}},[e._v("\n        "+e._s("0"==t?"Not Active":"Active")+"\n      ")])],1)}}],null,!0)}):e._e()],1)}),[],!1,null,"2b7a50da",null);t.default=component.exports},901:function(e,t,n){"use strict";var o=n(904),r=n.n(o);t.a={methods:{formatDate:function(e){var t="";return e&&(t=r()(new Date(e),this.dateFormat)),t},getTime:function(e){var t="";return e&&(t=r()(new Date(e),this.dateFormat2)),t}}}},938:function(e,t,n){var content=n(1042);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(46).default)("1f3a69f9",content,!0,{sourceMap:!1})}}]);