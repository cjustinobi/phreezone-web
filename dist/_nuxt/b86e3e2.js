(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1080:function(e,t,n){"use strict";n.r(t);n(52),n(95);var r=n(27),d=[{title:"Full Name",dataIndex:"user",scopedSlots:{customRender:"user"}},{title:"Amount",dataIndex:"amount",scopedSlots:{customRender:"amount"}}],o={name:"dividends",layout:"dashboard",data:function(){return{week:"",columns:d,ref:"",dividends:"",dividends2:"",excelFields:{Fullname:"user.full_name",ID:"user.referral",AccountNumber:{field:"user.account_number",callback:function(e){return JSON.stringify(e)}},BankName:"user.bank_name",Amount:"amount"}}},methods:{getDividends:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$post("user/dividends",{setWeek:e.week});case 2:e.dividends=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},getDividends2:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ref){t.next=2;break}return t.abrupt("return",e.$message.error("Enter referral code"));case 2:return t.next=4,e.$axios.$post("user/dividends2",{ref:e.ref});case 4:if(!(n=t.sent).success){t.next=7;break}return t.abrupt("return",e.dividends2=n.data);case 7:return t.abrupt("return",e.$message.error(n.message));case 8:case"end":return t.stop()}}),t)})))()},setWeek:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("date");case 2:e.week=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},computed:{filteredDividends:function(){var e=this;return this.isAdmin?this.dividends:this.isStockist?void 0:this.dividends.filter((function(t){return t.user_id==e.userId}))}},mounted:function(){this.getDividends(),this.setWeek()}},c=n(34),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-page-header",{attrs:{"sub-title":"All Dividends for week "+e.week}}),e._v(" "),n("a-row",[n("a-col",{attrs:{span:"4"}},[n("a-input",{staticStyle:{width:"188px","margin-bottom":"8px"},attrs:{placeholder:"Enter week number",min:"1",type:"number"},on:{change:e.getDividends},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}})],1),e._v(" "),!e.isAdmin&&e.isStockist?n("a-col",{attrs:{span:"8"}},[n("a-input",{staticStyle:{width:"188px","margin-bottom":"8px"},attrs:{placeholder:"Member Code"},model:{value:e.ref,callback:function(t){e.ref=t},expression:"ref"}}),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.getDividends2}},[e._v("Get Dividend")])],1):e._e(),e._v(" "),e.isAdmin?n("a-col",{attrs:{span:"6"}},[n("download-excel",{staticClass:"btn btn-primary",attrs:{data:e.dividends,fields:e.excelFields,worksheet:"My Worksheet",name:"dividend-"+e.week+".xls"}},[e._v("\n        Download\n      ")])],1):e._e()],1),e._v(" "),e.isAdmin&&e.dividends||!e.isStockist?n("a-table",{attrs:{columns:e.columns,"data-source":e.filteredDividends,rowKey:function(e){return e.id},scroll:{x:1500,y:300},size:"small",pagination:{pageSize:50}},scopedSlots:e._u([{key:"user",fn:function(t){return n("span",{},[e._v(e._s(t.full_name))])}},{key:"amount",fn:function(t){return n("span",{},[n("b",[e._v(e._s(t))])])}}],null,!1,3896920420)}):e._e(),e._v(" "),!e.isAdmin&&e.isStockist&&e.dividends2?n("a-table",{attrs:{columns:e.columns,"data-source":e.dividends2,rowKey:function(e){return e.id},scroll:{x:1500,y:300},size:"small",pagination:{pageSize:50}},scopedSlots:e._u([{key:"user",fn:function(t){return n("span",{},[e._v(e._s(t.full_name))])}},{key:"amount",fn:function(t){return n("span",{},[n("b",[e._v(e._s(t))])])}}],null,!1,3896920420)}):e._e()],1)}),[],!1,null,"5d5013ac",null);t.default=component.exports}}]);