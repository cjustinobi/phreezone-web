(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1097:function(e,t,n){"use strict";n.r(t);n(52),n(95);var r=n(27),o=[{title:"Full Name",dataIndex:"user",scopedSlots:{customRender:"fn"},fixed:"left"},{title:"Stockist Code",dataIndex:"user.referral",scopedSlots:{customRender:"referral"}},{title:"Shopping",dataIndex:"shopping_sum",scopedSlots:{customRender:"shopping"}},{title:"Stream Sales",dataIndex:"stream_sum"},{title:"Upgrade Pack",dataIndex:"pack_sum"},{title:"Phreezone Special Sales",dataIndex:"phreezone_special_sales_sum"},{title:"Sales Allowance",dataIndex:"phreezone_special_sum"},{title:"Total",scopedSlots:{customRender:"total"}},{title:"Paid",dataIndex:"paid",scopedSlots:{customRender:"paid"}}],l={name:"stockist-commissions",layout:"dashboard",data:function(){return{columns:o,bonuses:"",week:"",userReferral:1==this.$auth.user.userType?"":this.$auth.user.referral,excelFields:{FullName:"user.full_name",StockistCode:"user.referral",Shopping:"shopping_sum",StreamSales:"stream_sum",UpgradePack:"pack_sum",SalesAllowance:"phreezone_special_sum",AccountNumber:{field:"user.account_number",callback:function(e){return JSON.stringify(e)}},BankName:"user.bank_name",Total:{callback:function(data){return+data.shopping_sum+ +data.stream_sum+ +data.pack_sum+ +data.phreezone_special_sum}}}}},methods:{getCommissions:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$post("admin/stockist-commission",{referral:e.userReferral,setWeek:e.week});case 2:e.bonuses=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},getWeekCommissions:function(){this.getCommissions()},setWeek:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("date");case 2:e.week=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},computed:{filteredColumns:function(){return this.isAdmin?o:o.filter((function(e){return"phreezone_special_sales_sum"!==e.dataIndex}))}},mounted:function(){this.getCommissions(),this.setWeek()}},c=n(34),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-page-header",{attrs:{"sub-title":"All Stockist Sales for week "+e.week}}),e._v(" "),n("a-row",[n("a-col",{attrs:{lg:6,xs:4}},[n("a-input",{staticStyle:{width:"188px","margin-bottom":"8px"},attrs:{placeholder:"Enter week number",min:"1",type:"number"},on:{change:e.getWeekCommissions},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}})],1),e._v(" "),e.isAdmin?n("a-col",{attrs:{lg:6,xs:8}},[n("a-input",{staticStyle:{width:"188px","margin-bottom":"8px"},attrs:{placeholder:"Sponsor ID"},on:{change:e.getWeekCommissions},model:{value:e.userReferral,callback:function(t){e.userReferral=t},expression:"userReferral"}})],1):e._e(),e._v(" "),n("a-col",{attrs:{lg:6,xs:8}},[n("download-excel",{staticClass:"btn btn-primary",attrs:{data:e.bonuses,fields:e.excelFields,worksheet:"My Worksheet",name:"week-"+e.week+".xls"}},[e._v("\n          Download\n        ")]),e._v(" "),n("br"),n("br")],1)],1),e._v(" "),e.bonuses?n("a-table",{attrs:{columns:e.filteredColumns,"data-source":e.bonuses,rowKey:function(e){return e.id},scroll:{x:1500,y:300},size:"small"},scopedSlots:e._u([{key:"paid",fn:function(t){return n("span",{},[n("a-tag",{attrs:{color:"0"==t?"volcano":"green"}},[e._v("\n        "+e._s("0"==t?"Not Paid":"Paid")+"\n      ")])],1)}},{key:"pkg",fn:function(t,r){return r.package?n("span",{},[e._v(e._s(null==r.package.name?"N/P":r.package.name))]):e._e()}},{key:"fullName",fn:function(t,r){return n("span",{},[e._v(e._s(r.first_name)+" "+e._s(r.last_name))])}},{key:"total",fn:function(t,r){return n("span",{},[e.isAdmin?n("b",[e._v(e._s(e._f("currency")(+r.shopping_sum+ +r.pack_sum+ +r.stream_sum+ +r.phreezone_special_sum-.05*(+r.shopping_sum+ +r.pack_sum+ +r.stream_sum+ +r.phreezone_special_sum))))]):n("b",[e._v(e._s(e._f("currency")(+r.shopping_sum+ +r.pack_sum+ +r.stream_sum+ +r.phreezone_special_sum)))])])}},{key:"fn",fn:function(t){return n("span",{},[e._v(e._s(t.full_name))])}}],null,!0)}):e._e()],1)}),[],!1,null,"9419139e",null);t.default=component.exports}}]);